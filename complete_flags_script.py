import json

# Comprehensive mapping of city to (country, flag)
CITY_COUNTRY_FLAG = {
    # Major cities
    "Moscow": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Saint Petersburg": ("Russia", "ğŸ‡·ğŸ‡º"),
    "London": ("UK", "ğŸ‡¬ğŸ‡§"),
    "New York": ("USA", "ğŸ‡ºğŸ‡¸"),
    "Paris": ("France", "ğŸ‡«ğŸ‡·"),
    "Berlin": ("Germany", "ğŸ‡©ğŸ‡ª"),
    "Tokyo": ("Japan", "ğŸ‡¯ğŸ‡µ"),
    "Beijing": ("China", "ğŸ‡¨ğŸ‡³"),
    "Rome": ("Italy", "ğŸ‡®ğŸ‡¹"),
    "Madrid": ("Spain", "ğŸ‡ªğŸ‡¸"),
    "Lisbon": ("Portugal", "ğŸ‡µğŸ‡¹"),
    "Istanbul": ("Turkey", "ğŸ‡¹ğŸ‡·"),
    "Bangkok": ("Thailand", "ğŸ‡¹ğŸ‡­"),
    "Dubai": ("UAE", "ğŸ‡¦ğŸ‡ª"),
    "Dublin": ("Ireland", "ğŸ‡®ğŸ‡ª"),
    "Budapest": ("Hungary", "ğŸ‡­ğŸ‡º"),
    "Vienna": ("Austria", "ğŸ‡¦ğŸ‡¹"),
    "Prague": ("Czech Republic", "ğŸ‡¨ğŸ‡¿"),
    "Warsaw": ("Poland", "ğŸ‡µğŸ‡±"),
    "Zurich": ("Switzerland", "ğŸ‡¨ğŸ‡­"),
    
    # Russian cities
    "Abakan": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Arkhangelsk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Astrakhan": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Barnaul": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Belgorod": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Bryansk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Cheboksary": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Chelyabinsk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Chernyahovsk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Derbent": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Elista": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Irkutsk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Ivanovo": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Kaliningrad": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Kaluga": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Kazan": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Kemerovo": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Khabarovsk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Khuzhir": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Kirov": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Kislovodsk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Kostroma": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Krasnodar": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Krasnoyarsk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Kursk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Kyzyl": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Magnitogorsk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Makhachkala": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Maykop": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Murmansk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Nab. Chelny": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Nalchik": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Novorossiysk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Novosibirsk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Omsk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Orenburg": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Oryol": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Perm": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Petropavlovsk-Kamchatskiy": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Petrozavodsk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Pskov": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Pyatigorsk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Rostov-on-Don": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Ryazan": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Rybinsk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Samara": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Saratov": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Smolensk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Sochi": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Stavropol": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Surgut": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Tambov": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Tolyatti": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Tomsk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Tula": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Tutaev": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Tver": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Tyumen": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Ufa": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Uglich": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Ulan-Ude": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Ulyanovsk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Velikiy Novgorod": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Vladikavkaz": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Vladimir": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Vladivostok": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Volgograd": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Voronezh": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Vyborg": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Yakutsk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Yaroslavl": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Yekaterinburg": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Yuzhno-Sakhalinsk": ("Russia", "ğŸ‡·ğŸ‡º"),
    
    # Other cities
    "Abu Dhabi": ("UAE", "ğŸ‡¦ğŸ‡ª"),
    "Agra": ("India", "ğŸ‡®ğŸ‡³"),
    "Alanya": ("Turkey", "ğŸ‡¹ğŸ‡·"),
    "Amsterdam": ("Netherlands", "ğŸ‡³ğŸ‡±"),
    "Antalya": ("Turkey", "ğŸ‡¹ğŸ‡·"),
    "Athens": ("Greece", "ğŸ‡¬ğŸ‡·"),
    "Baku": ("Azerbaijan", "ğŸ‡¦ğŸ‡¿"),
    "Barcelona": ("Spain", "ğŸ‡ªğŸ‡¸"),
    "Batumi": ("Georgia", "ğŸ‡¬ğŸ‡ª"),
    "Bogota": ("Colombia", "ğŸ‡¨ğŸ‡´"),
    "Bordeaux": ("France", "ğŸ‡«ğŸ‡·"),
    "Brest (Belarus)": ("Belarus", "ğŸ‡§ğŸ‡¾"),
    "Brno": ("Czech Republic", "ğŸ‡¨ğŸ‡¿"),
    "Brussels": ("Belgium", "ğŸ‡§ğŸ‡ª"),
    "Busan": ("South Korea", "ğŸ‡°ğŸ‡·"),
    "Cancun": ("Mexico", "ğŸ‡²ğŸ‡½"),
    "Chennai": ("India", "ğŸ‡®ğŸ‡³"),
    "Chiang Mai": ("Thailand", "ğŸ‡¹ğŸ‡­"),
    "Chicago": ("USA", "ğŸ‡ºğŸ‡¸"),
    "Da Nang": ("Vietnam", "ğŸ‡»ğŸ‡³"),
    "Dammam": ("Saudi Arabia", "ğŸ‡¸ğŸ‡¦"),
    "Delhi": ("India", "ğŸ‡®ğŸ‡³"),
    "Denpasar": ("Indonesia", "ğŸ‡®ğŸ‡©"),
    "Fethiye": ("Turkey", "ğŸ‡¹ğŸ‡·"),
    "Florence": ("Italy", "ğŸ‡®ğŸ‡¹"),
    "Frankfurt": ("Germany", "ğŸ‡©ğŸ‡ª"),
    "Fukuoka": ("Japan", "ğŸ‡¯ğŸ‡µ"),
    "Gelendzhik": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Gomel": ("Belarus", "ğŸ‡§ğŸ‡¾"),
    "Goreme, Cappadocia": ("Turkey", "ğŸ‡¹ğŸ‡·"),
    "Gorno-Altaysk": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Grodno": ("Belarus", "ğŸ‡§ğŸ‡¾"),
    "Grozny": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Guangzhou": ("China", "ğŸ‡¨ğŸ‡³"),
    "Ha Long": ("Vietnam", "ğŸ‡»ğŸ‡³"),
    "Hamburg": ("Germany", "ğŸ‡©ğŸ‡ª"),
    "Hanoi": ("Vietnam", "ğŸ‡»ğŸ‡³"),
    "Helsinki": ("Finland", "ğŸ‡«ğŸ‡®"),
    "Heraklion": ("Greece", "ğŸ‡¬ğŸ‡·"),
    "Ho Chi Minh City": ("Vietnam", "ğŸ‡»ğŸ‡³"),
    "Hong Kong": ("China", "ğŸ‡¨ğŸ‡³"),
    "Jaipur": ("India", "ğŸ‡®ğŸ‡³"),
    "Jakarta": ("Indonesia", "ğŸ‡®ğŸ‡©"),
    "Jeju": ("South Korea", "ğŸ‡°ğŸ‡·"),
    "Jerusalem": ("Israel", "ğŸ‡®ğŸ‡±"),
    "Johannesburg": ("South Africa", "ğŸ‡¿ğŸ‡¦"),
    "Johor Bahru": ("Malaysia", "ğŸ‡²ğŸ‡¾"),
    "Kas, Turkiye": ("Turkey", "ğŸ‡¹ğŸ‡·"),
    "Krabi": ("Thailand", "ğŸ‡¹ğŸ‡­"),
    "Kuala Lumpur": ("Malaysia", "ğŸ‡²ğŸ‡¾"),
    "Kutaisi": ("Georgia", "ğŸ‡¬ğŸ‡ª"),
    "Kyoto": ("Japan", "ğŸ‡¯ğŸ‡µ"),
    "Las Vegas": ("USA", "ğŸ‡ºğŸ‡¸"),
    "Lima": ("Peru", "ğŸ‡µğŸ‡ª"),
    "Los Angeles": ("USA", "ğŸ‡ºğŸ‡¸"),
    "Macau": ("China", "ğŸ‡¨ğŸ‡³"),
    "Mecca": ("Saudi Arabia", "ğŸ‡¸ğŸ‡¦"),
    "Medina": ("Saudi Arabia", "ğŸ‡¸ğŸ‡¦"),
    "Mexico City": ("Mexico", "ğŸ‡²ğŸ‡½"),
    "Miami": ("USA", "ğŸ‡ºğŸ‡¸"),
    "Milan": ("Italy", "ğŸ‡®ğŸ‡¹"),
    "Minsk": ("Belarus", "ğŸ‡§ğŸ‡¾"),
    "Montreal": ("Canada", "ğŸ‡¨ğŸ‡¦"),
    "Mumbai": ("India", "ğŸ‡®ğŸ‡³"),
    "Munich": ("Germany", "ğŸ‡©ğŸ‡ª"),
    "Naples": ("Italy", "ğŸ‡®ğŸ‡¹"),
    "Nice": ("France", "ğŸ‡«ğŸ‡·"),
    "Nizhniy Novgorod": ("Russia", "ğŸ‡·ğŸ‡º"),
    "Osaka": ("Japan", "ğŸ‡¯ğŸ‡µ"),
    "Palma de Mallorca": ("Spain", "ğŸ‡ªğŸ‡¸"),
    "Pattaya": ("Thailand", "ğŸ‡¹ğŸ‡­"),
    "Penang": ("Malaysia", "ğŸ‡²ğŸ‡¾"),
    "Phuket": ("Thailand", "ğŸ‡¹ğŸ‡­"),
    "Porto": ("Portugal", "ğŸ‡µğŸ‡¹"),
    "Rhodes": ("Greece", "ğŸ‡¬ğŸ‡·"),
    "Rio de Janeiro": ("Brazil", "ğŸ‡§ğŸ‡·"),
    "Riyadh": ("Saudi Arabia", "ğŸ‡¸ğŸ‡¦"),
    "Salvador": ("Brazil", "ğŸ‡§ğŸ‡·"),
    "San Francisco": ("USA", "ğŸ‡ºğŸ‡¸"),
    "Seattle": ("USA", "ğŸ‡ºğŸ‡¸"),
    "Seoul": ("South Korea", "ğŸ‡°ğŸ‡·"),
    "Shanghai": ("China", "ğŸ‡¨ğŸ‡³"),
    "Shenzhen": ("China", "ğŸ‡¨ğŸ‡³"),
    "Singapore": ("Singapore", "ğŸ‡¸ğŸ‡¬"),
    "Stockholm": ("Sweden", "ğŸ‡¸ğŸ‡ª"),
    "Sydney": ("Australia", "ğŸ‡¦ğŸ‡º"),
    "Taipei": ("Taiwan", "ğŸ‡¹ğŸ‡¼"),
    "Taiwan": ("Taiwan", "ğŸ‡¹ğŸ‡¼"),
    "Tbilisi": ("Georgia", "ğŸ‡¬ğŸ‡ª"),
    "Tel Aviv": ("Israel", "ğŸ‡®ğŸ‡±"),
    "Toronto": ("Canada", "ğŸ‡¨ğŸ‡¦"),
    "Vancouver": ("Canada", "ğŸ‡¨ğŸ‡¦"),
    "Venice": ("Italy", "ğŸ‡®ğŸ‡¹"),
    "Vitebsk": ("Belarus", "ğŸ‡§ğŸ‡¾"),
    "Zhuhai": ("China", "ğŸ‡¨ğŸ‡³"),
    "Cairo": ("Egypt", "ğŸ‡ªğŸ‡¬"),
    "Chisinau": ("Moldova", "ğŸ‡²ğŸ‡©"),
    "Cologne": ("Germany", "ğŸ‡©ğŸ‡ª"),
    "Copenhagen": ("Denmark", "ğŸ‡©ğŸ‡°"),
    "Dallas": ("USA", "ğŸ‡ºğŸ‡¸"),
    "Orlando": ("USA", "ğŸ‡ºğŸ‡¸"),
}

def add_flags_to_cities(input_path, output_path):
    with open(input_path, 'r', encoding='utf-8') as f:
        cities = json.load(f)

    for city in cities:
        # If already has country and flag, skip
        if 'country' in city and 'flag' in city:
            continue
        # Try to get from city mapping
        if city['name'] in CITY_COUNTRY_FLAG:
            country, flag = CITY_COUNTRY_FLAG[city['name']]
            city['country'] = country
            city['flag'] = flag
        # Otherwise, set to unknown
        else:
            city['country'] = city.get('country', 'Unknown')
            city['flag'] = 'ğŸ³ï¸'

    with open(output_path, 'w', encoding='utf-8') as f:
        json.dump(cities, f, ensure_ascii=False, indent=2)

if __name__ == "__main__":
    add_flags_to_cities('cities.json', 'cities_with_flags.json') 